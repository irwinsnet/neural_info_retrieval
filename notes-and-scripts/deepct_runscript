

source venv_deepct/bin/activate
apt install python3-pip
pip3 install --upgrade pip
pip3 install tensorflow==1.15.0
pip3 install tensorflow-gpu==1.15.0

# set environment variables that we will require
export MODEL_HOME=/home/ubuntu/efs/trainvol/trespi
export BERT_BASE_DIR=$MODEL_HOME/uncased_L-12_H-768_A-12
export INIT_CKPT=./output/marco/model.ckpt-0
export INPUT_DATA_FILE=/home/ubuntu/efs/wadeholmes/passages_trespi_intdex.txt
export OUTPUT_DIR=./predictions/marco/trespi

mkdir -p $OUTPUT_DIR

cd $MODEL_HOME/DeepCT
python run_deepct.py \
 --task_name=marcotsvdoc \
 --do_train=false \
 --do_eval=false \
 --do_predict=true \
 --data_dir=$INPUT_DATA_FILE \
 --vocab_file=$BERT_BASE_DIR/vocab.txt \
 --bert_config_file=$BERT_BASE_DIR/bert_config.json \
 --init_checkpoint=$INIT_CKPT \
 --max_seq_length=128 \
 --train_batch_size=16 \
 --learning_rate=2e-5 \
 --num_train_epochs=3.0 \
 --output_dir=$OUTPUT_DIR


/home/ubuntu/efs/wadeholmes/passages_trespi_intdex.txt